{% extends 'pages/layout.html' %}

{% block body %}

            <div id="page-wrapper">
                <div class="container-fluid">
                    <div class="row">
                       <div class="col-lg-12">
                           <ol class="breadcrumb " style="margin-top: 30px;font-size: 15px;background-color: none;">
                            <li><a href="/admin/admin-dashboard">Dashboard</a></li>
                            <li class="active">Order Management</li>
                             <li class="active">View / Update Order</li>
                          
                        </ol>
                        <hr>
                       </div>
                    </div>
                    <!-- /.row -->

                    <!--<div class="row">
                        <div class="col-sm-1"></div>
                        <div class="col-sm-10 center-block">
                            <div class="panel panel-default">
                                <div class="panel-heading">Update Status</div>
                            
                            <div class="panel-body">
                                 <form>
                                     

                                        <div class="row">
                                            <div class="col-sm-6">

                                                <div class="form-group">
                                                    <label for="Order_No" class="col-form-label ">Order No</label>
                                                    <input type="text" class="form-control all-border" id="Order_No" placeholder="" disabled="">
                                                </div>

                                                <div class="form-group">
                                                    <label for="Order_Date" class="col-form-label ">Order Date</label>
                                                    <input type="datetime-local" class="form-control all-border" id="Order_Date" placeholder="" disabled="">
                                                </div>

                                                <div class="form-group">
                                                      <label for="Product_Name" class="col-form-label ">Product Name</label>
                                                    <input type="text" class="form-control all-border" id="Product_Name" placeholder="Talpatri" disabled="">
                                                </div>

                                                <div class="form-group">
                                                      <label for="Product_Quantity" class="col-form-label ">Product Quanity</label>
                                                    <input type="number" class="form-control all-border" id="Product_Quantity" placeholder="">
                                                </div>

                                                  <div class="form-group">
                                                      <label for="Product_Price" class="col-form-label ">Product Price</label>
                                                    <input type="number" class="form-control all-border" id="Product_Price" placeholder="">
                                                </div>

                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                      <label for="Product_Description" class="col-form-label ">Product Description</label>
                                                      <textarea class="form-control" rows="4" id="Product_Description"></textarea>
                                                </div>

                                              <div class="form-group">
                                                  <label for="Relatd_Crop" class="col-form-label ">Related Crop</label>
                                                <select id="Relatd_Crop" data-style="" class="selectpicker form-control" multiple data-max-options="2">
                                                    <option>Crop A</option>
                                                    <option>Crop B</option>
                                                </select>   
                                              </div>

                                                <div class="form-group">
                                                     <label for="Brand" class="col-form-label ">Brand</label>
                                                    <select class="form-control all-border" placeholder="">
                                                        <option value="+47">Brand A</option>
                                                        <option value="+46">Brand B</option>
                                                    </select>
                                                </div>

                                                  <button type="submit" class="btn btn-primary btn-block">Update</button>
                                            </div>
                                        </div>
                                        
                                 </form>
                                 </div>
                            </div>
                        </div>
                        <div class="col-sm-1"></div>
                    </div>-->
                  
                    
                    {% include 'includes/_messages.html' %}
                    <div class="row">
                        <div class="col-sm-12">
                             <div class="panel panel-default">
                            <div class="panel-heading">
                                Order Table
                            </div>
                            <div class="panel-body">




                                <div class="table-responsive">
                                    <div id="dataTables-example_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <table class="table table-striped table-bordered table-hover dataTable no-footer" id="dataTables-example" role="grid" aria-describedby="dataTables-example_info">
                                            <thead>
                                                <tr role="row">
                                                    <th class="sorting_asc" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-sort="ascending" aria-label="User Type: activate to sort column descending" style="width: 104px;">Order Id</th>
                                                    <th class="sorting" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 709px;">Order Date</th>
                                                    <th class="sorting" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-label="Mobile No: activate to sort column ascending" style="width: 250px;">Name</th>
                                                    <th class="sorting" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-label="Address: activate to sort column ascending" style="width: 203px;">Payment Status</th>
                                                    <th class="sorting" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-label="Active: activate to sort column ascending" style="width: 203px;">Order Status</th>
                                                  
                                                    <th class="sorting" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-label="Mobile No: activate to sort column ascending" style="width: 250px;">Total Amount(â‚¹)</th>
                                                    <th class="sorting" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-label="Delete: activate to sort column ascending" style="width: 103px;">Update</th>
                                                    <th class="sorting" tabindex="0" aria-controls="dataTables-example" rowspan="1" colspan="1" aria-label="Delete: activate to sort column ascending" style="width: 103px;">Delete</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                         
                                               {% for payment_details in payment_details %} 
                                
                                             
                                            <tr class="gradeA odd" role="row">
                                                    <td class="sorting_1"><a href="/admin/order-mng/order-info/{{  payment_details.orders.order_id }}">#{{ payment_details.orders.order_id }}</a></td>
                                                    <td>{{ payment_details.orders.order_date }}</td>
                                                    <td>{{ payment_details.orders.name }}</td>
                                                    <td>
                                                        <div class="form-group">
                                                            <select class="form-control all-border" placeholder="user" id="payment_status" name="payment_status">
                                                                    
                                                                {% if payment_details.payment_status == 'Pending' %}
                                                                <option value="Pending" selected="">Pending</option>
                                                                {% else %}
                                                                <option value="Pending" >Pending</option>
                                                                {% endif %}

                                                                 {% if payment_details.payment_status == 'Paid' %}
                                                                <option value="Paid" selected="">Paid</option>
                                                                 {% else %}
                                                                  <option value="Paid" >Paid</option>
                                                                {% endif %}


                                                                {% if payment_details.payment_status == 'Cancelled' %}
                                                                <option value="Cancelled" selected="">Cancelled</option>
                                                                 {% else %}
                                                                  <option value="Cancelled" >Cancelled</option>
                                                                {% endif %}

                                                                {% if payment_details.payment_status == 'Failed' %}
                                                                <option value="Failed" selected="">Failed</option>
                                                                 {% else %}
                                                                  <option value="Failed" >Failed</option>
                                                                {% endif %}
                                                                
                                                            </select>
                                                         </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <select class="form-control all-border" placeholder="user" name="order_status">
                                                                {% if payment_details.orders.order_status == 'Ordered' %}
                                                                <option value="Ordered" selected="">Ordered</option>
                                                                {% else %}
                                                                <option value="Ordered" >Ordered</option>
                                                                {% endif %}


                                                                {% if payment_details.orders.order_status == 'Processing' %}
                                                                <option value="Processing" selected="">Processing</option>
                                                                {% else %}
                                                                <option value="Processing" >Processing</option>
                                                                {% endif %}

                                                                {% if payment_details.orders.order_status == 'Completed' %}
                                                                <option value="Completed" selected="">Completed</option>
                                                                {% else %}
                                                                <option value="Completed" >Completed</option>
                                                                {% endif %}


                                                               {% if payment_details.orders.order_status == 'Cancelled' %}
                                                                <option value="Cancelled" selected="">Cancelled</option>
                                                                {% else %}
                                                                <option value="Cancelled" >Cancelled</option>
                                                                {% endif %}


                                                            </select>
                                                         </div> 
                                                    </td>
                                                   
                                                    <td>{{ payment_details.orders.order_total_amt }}</td>
                                                    <td class="center"><a href="" class="update_order btn btn-success " role="button" id="{{ payment_details.orders.order_id }}"> Update </a></td>
                                                    <td class="center"><a href="" class="delete_order btn btn-danger " role="button" id="{{ payment_details.orders.order_id }}"> Delete </a></td>
                                                </tr>
                                              {% endfor %}
                                             
                                            </tbody>
                                        </table></div></div>
                                    </div>
                                </div>





                            </div>
                        </div>
                        </div>
                    </div>

            
                   


                </div>
                <!-- /.container-fluid -->
            </div>
            <!-- /#page-wrapper -->
            <script>
                $(document).ready(function()
                {
                    $('.delete_order').click(function(event)
                    {
                        $.ajax({
                        url:'/admin/order-mng',
                        data:
                        {
                         'order_delete_id':$(this).attr('id')
                        },
                        success:function(response)
                        {
                            location.reload();
                           console.log("data is deleted");

                        }
                      });
                        event.preventDefault();
                    });

                    $('.update_order').click(function(event)
                    {

                        console.log($(this).attr('id'));
                        $.ajax({
                            url:'/admin/order-mng',
                            data:
                            {
                             'order_update_id':$(this).attr('id'),
                             'order_status':$('select[name="order_status"]').val(),
                             'payment_status':$('select[name="payment_status"]').val()
                            },
                            success:function(response)
                            {
                                // location.reload();
                                console.log("data is deleted");
                            }
                        });
                    });
                });
            </script>

{% endblock %}
